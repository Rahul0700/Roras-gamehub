<!DOCTYPE html>
{%load static%}
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>onlineGames</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>
  <body>
     <style media="screen and (orientation: landscape)">
     body
    {
      background-image: url("{%static "images/Image10.jpg"%}");
      background-repeat: no-repeat;
      background-size: cover;
      background-attachment:fixed;
    }

    .board button
    {
      height:100px;
      width:100px;
      border:1px solid black;
      text-align: center;
      font-size: 50px;
      color: white;
      font-weight: bold;
      margin: 3px;
      background-color: white;
    }


    #head2
    {
      font-family: 'Lobster';
      font-style: italic;
      font-size:3vw;
    }


    table
    {
      margin-top: 50px;
      margin-bottom:10px;
      margin-left: 30px;
      /* margin: 80px; */
    }

    #Restart
    {
      margin-left: 250px;
    }


    li
    {
      display: inline;
    }


    ul
    {
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #333;
    }


    li
    {
      float: left;
    }

    li a
    {
      display: block;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
    }


    li a:hover
    {
      display: block;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      background-color: #009c10;
    }


    .active
    {
      background-color: #1c42ff;
    }


    li
    {
      border-right: 1px solid #bbb;
    }


    ul
    {
      position: fixed;
      top: 0;
      width: 100%;
    }

    h2
    {
      display:inline;
    }
    h1
    {
      display:inline;
    }
    #head5
    {
        margin-top:40px;
        margin-left:30px;
    }

    </style>

    <style media="screen and (orientation: portrait)">

    body
    {
      background-image: url("{%static "images/Image11.jpg"%}");
      background-repeat: no-repeat;
      background-size: cover;
      background-attachment:fixed;
    }





       table
    {
      margin-top: 100px;
      margin-bottom:50px;
      margin-left: 30px;
      /* margin: 80px; */
    }

    .board button
    {
      height:22vw;
      width:22vw;
      border:1px solid black;
      text-align: center;
      font-size: 100px;
      color: white;
      font-weight: bold;
      margin: 3px;
      background-color: white;
    }

    #head2
    {
      font-family: 'Lobster';
      font-style: italic;
      font-size:7vw;
    }




    #Restart
    {
        font-size:4vw;
      margin-left: 54vw;
    }


    li
    {
      display: inline;
    }


    ul
    {
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #333;
    }


    li
    {
      float: left;
    }

    li a
    {
        font-size:3vw;
      display: block;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
    }


    li a:hover
    {
      display: block;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      background-color: #009c10;
    }


    .active
    {
      background-color: #1c42ff;
    }


    li
    {
      border-right: 1px solid #bbb;
    }


    ul
    {
      position: fixed;
      top: 0;
      width: 100%;
    }
    #head5
    {
        text-align:center;
        background-color:#f6d35b;width:64vw;
        margin-left:3vw;
        margin-top:5vw;
        font-size:3vw;
    }


    h2
    {

      display:inline;
    }
    h1
    {
        font-size:5vw;
      display:inline;
    }
    .head
    {
        margin-top:10vw;
    }


    </style>

  <nav class="navbar navbar-default ">
      <ul>
      <li><a href="{% url 'index' %}">Home</a></li>
      <li><a href="{% url 'gameapp:game1'%}">TicTacToe</a></li>
      <li><a href="{% url 'gameapp:game2'%}">Connect Four</a></li>
    </ul>
  </nav>

  <div class="container">
      <div class="head"><h2 style="margin-left:27px;" id='head2'>Tic Tac Toe </h2><h1 >&#127919;</h1></div>

      <table align='center' class='board'>
        <tr>
          <td><button type="button" name="button"></button></td>
          <td><button type="button" name="button"></button></td>
          <td><button type="button" name="button"></button></td>
        </tr>
        <tr>
          <td><button type="button" name="button"></button></td>
          <td><button type="button" name="button"></button></td>
          <td><button type="button" name="button"></button></td>
        </tr>
        <tr>
          <td><button type="button" name="button"></button></td>
          <td><button type="button" name="button"></button></td>
          <td><button type="button" name="button"></button></td>
        </tr>
      </table>
      <button class='btn btn-success btn-lg'id="Restart" type="button" name="button">Restart</button>
      <h5 id="head5"  ></h5>

    </div>

      <script
      src="https://code.jquery.com/jquery-3.1.1.min.js"
      integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous">
      </script>
      <script >
      var playerOne = 'Player 1'
      var playerOneVar='X';
      var playerOneColor= '#ff2919';
      var playerTwo = 'Player 2'
      var playerTwoVar='O';
      var playerTwoColor= '#0493e0'
      var win=false;
      var idVar=null;
      var table = $('table tr');
      var game_status=true;
      var invalidInput=true;
      var header=document.querySelector('h2')
      var restart=document.querySelector('#Restart')






      // Working of Restart

      function InterchangeVar(rowIndex,colIndex)
      {
          return table.eq(rowIndex).find('td').eq(colIndex).find('button').text('');
      }


      function InterchangeColor(rowIndex,colIndex)
      {
        return table.eq(rowIndex).find('td').eq(colIndex).find('button').css('background-color','rgb(255, 255, 255)');
      }


      function InterchangeHeadercolor()
      {
        colorInput='rgb(0, 0, 0)';
        header.style.color=colorInput;
      }


      function changeWin()
      {
        return win=false
      }


      function changeCheck()
      {
        if(idVar!=null)
        {
          clearInterval(idVar);
          return idVar=null;
        }
        else if (win===true)
        {
            idVar = setInterval("changeHeadercolor()",500);
            changeWin();
            return idVar;
        }

      }


      function clearBoard()
      {
        for(var row=0;row<4;row++)
        {
          for(var col=0;col<4;col++)
          {
            InterchangeVar(row,col);
            InterchangeColor(row,col);
          }
        }
        $('h2').text("Tic Tac Toe ")
        $('h5').text("Gameplay: Player 1 aim on your first move")
        changeCheck();
        InterchangeHeadercolor();
        return game_status=true;
      }
      restart.addEventListener('click',clearBoard)

      // End




      // Random Color Generator

      function colorChanger()
      {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++)
        {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }


      function changeHeadercolor()
      {
        colorInput=colorChanger();
        header.style.color=colorInput;
      }

      // End




      // Input Functions

      function changeColor(rowIndex,colIndex,color)
      {
        return table.eq(rowIndex).find('td').eq(colIndex).find('button').css('background-color',color);
      }


      function changeVar(rowIndex,colIndex,vary)
      {
        if(returnText(rowIndex,colIndex)!==playerOneVar&&returnText(rowIndex,colIndex)!==playerTwoVar)
        {
          return table.eq(rowIndex).find('td').eq(colIndex).find('button').text(vary);
        }
      }


      function returnText(rowIndex,colIndex,color)
      {
        return table.eq(rowIndex).find('td').eq(colIndex).text();
      }


      function checkInput(rowIndex,colIndex)
      {
        if(returnText(rowIndex,colIndex)!==playerOneVar &&returnText(rowIndex,colIndex)!==playerTwoVar)
        {
          return(invalidInput=true)
        }
        else
        {
          return(invalidInput=false)
        }
      }


      // End



      //Win and draw check


      function colorMatchCheck(one,two,three)
      {
        return (one===two && one===three && one !== '' && one !== undefined);
      }


      function horizontalWinCheck()
      {
        for(var row=0;row<4;row++)
        {
          var col=0;
            if(colorMatchCheck(returnText(row,col),returnText(row,col+1),returnText(row,col+2)))
            {
              return true;
            }
            else
            {
              continue;
            }
        }
      }


      function verticalWinCheck()
      {
        for(var col=0;col<4;col++)
        {
          var row=0;
            if(colorMatchCheck(returnText(row,col),returnText(row+1,col),returnText(row+2,col)))
            {
              return true;
            }
            else
            {
              continue;
            }
        }
      }


      function diagonalWinCheck()
      {
          var row=0;
          var col=0;
              if (colorMatchCheck(returnText(row,col), returnText(row+1,col+1) ,returnText(row+2,col+2)))
              {
                return true;
              }
              else if (colorMatchCheck(returnText(row,col+2), returnText(row+1,col+1) ,returnText(row+2,col)))
              {
                return true;
              }
              else
              {
                return false;
              }
      }


      function gameEnd(winningPlayer)
      {
          for (var col = 0; col < 4; col++)
          {
            for (var row = 0; row < 4; row++)
            {
            $('h5').text("Press RESTART and jump in again!")
              $('h2').text("Well, Cheers "+winningPlayer+"! ")
              return win=true;
            }
          }
      }

      function drawMatchCheck(one,two,three)
      {
        return (one!==''&&two!==''&&three!=='' && one !== undefined)
      }


      function gameDraw()
      {
          for (var col = 0; col < 4; col++)
          {
            for (var row = 0; row < 4; row++)
            {
              $('h2').text("You guys Twinned! ")
              $('h5').text("Press RESTART and jump in again!")
              return win=false;
            }
          }
      }


      function DrawCheck()
      {
        var col=0;
        if(drawMatchCheck(returnText(0,col),returnText(0,col+1),returnText(0,col+2)))
        {
          if(drawMatchCheck(returnText(1,col),returnText(1,col+1),returnText(1,col+2)))
          {
            if(drawMatchCheck(returnText(2,col),returnText(2,col+1),returnText(2,col+2)))
            {
              return true;
            }
          }
        }
      }


      //End




      //Main function
      var currentPlayer = 1;
      var currentName = playerOne;
      var currentVar=playerOneVar;
      var currentColor=playerOneColor;
      $('h5').text("Gameplay: Player 1 aim on your first move")
      $('.board button').on('click',function()
      {
        if(game_status)
        {
          var col = $(this).closest('td').index();
          var row = $(this).closest('tr').index();
          checkInput(row,col);
          changeVar(row,col,currentVar);

          if(invalidInput)
          {
            changeColor(row,col,currentColor);
            if (horizontalWinCheck() || verticalWinCheck()|| diagonalWinCheck())
            {
              gameEnd(currentName);
              changeCheck();
              return(game_status=false);
            }
            if(DrawCheck())
            {
              gameDraw();
              return(game_status=false);
            }
            currentPlayer = currentPlayer * -1 ;
            if(currentPlayer===1)
            {
              currentName= playerOne;
              $('h5').text("Gameplay: "+currentName+" it is your turn, arrow your X")
              currentVar=playerOneVar;
              currentColor=playerOneColor;
            }
            else
            {
              currentName=playerTwo;
              $('h5').text("Gameplay: "+currentName+" it is your turn, shaft your O")
              currentVar=playerTwoVar;
              currentColor=playerTwoColor;
            }
          }
        }
      })
      </script>



  </body>
</html>
